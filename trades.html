<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trade Log ‚Äî TradingHub</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .trade-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 18px;
            padding: 24px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        .trade-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 3px;
        }
        .trade-card.win::before { background: linear-gradient(90deg, var(--green), #00e68a55); }
        .trade-card.loss::before { background: linear-gradient(90deg, var(--red), #ff4d6a55); }
        .trade-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            flex-wrap: wrap;
            gap: 8px;
        }
        .trade-pair {
            font-size: 1.3rem;
            font-weight: 900;
            letter-spacing: -0.02em;
        }
        .trade-pnl {
            font-size: 1.4rem;
            font-weight: 900;
        }
        .trade-badges {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            margin-bottom: 14px;
        }
        .trade-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.72rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.04em;
        }
        .badge-dir-long { background: rgba(0,230,138,0.12); color: var(--green); border: 1px solid rgba(0,230,138,0.25); }
        .badge-dir-short { background: rgba(255,77,106,0.12); color: var(--red); border: 1px solid rgba(255,77,106,0.25); }
        .badge-lev { background: rgba(168,85,247,0.12); color: var(--purple); border: 1px solid rgba(168,85,247,0.25); }
        .badge-mode { background: rgba(255,255,255,0.06); color: var(--text-dim); border: 1px solid var(--border); }
        .badge-status { background: rgba(0,230,138,0.12); color: var(--green); border: 1px solid rgba(0,230,138,0.25); }
        .badge-status.sl { background: rgba(255,77,106,0.12); color: var(--red); border: 1px solid rgba(255,77,106,0.25); }
        .trade-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin-bottom: 14px;
        }
        .trade-metric {
            background: rgba(255,255,255,0.02);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 12px 14px;
        }
        .trade-metric-label {
            font-size: 0.7rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.06em;
            margin-bottom: 4px;
        }
        .trade-metric-value {
            font-size: 1rem;
            font-weight: 800;
        }
        .trade-timeline {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 16px;
            background: rgba(255,255,255,0.02);
            border-radius: 12px;
            border: 1px solid var(--border);
            margin-bottom: 12px;
            font-size: 0.82rem;
            flex-wrap: wrap;
        }
        .trade-timeline .arrow { color: var(--purple); font-weight: 900; }
        .trade-timeline .duration { color: var(--text-dim); margin-left: auto; }
        .trade-notes {
            font-size: 0.85rem;
            color: var(--text-dim);
            font-style: italic;
            padding: 10px 14px;
            background: rgba(168,85,247,0.04);
            border-radius: 10px;
            border-left: 3px solid var(--purple);
        }
        .summary-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 14px;
            margin-bottom: 28px;
        }
        .summary-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
        }
        .summary-card .val { font-size: 1.5rem; font-weight: 900; }
        .summary-card .lbl { font-size: 0.75rem; color: var(--text-dim); margin-top: 4px; }
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-dim);
        }
        .empty-state .icon { font-size: 3rem; margin-bottom: 16px; }
    </style>
</head>
<body>
    <div class="bg-grid"></div>
    <div class="bg-glow"></div>

    <div class="container page-content">
        <div class="page-header">
            <h1>üîç Detailed Trade Log</h1>
            <p>Full breakdown of every trade ‚Äî entries, exits, timing & performance</p>
        </div>

        <!-- Summary Stats -->
        <div id="summaryRow" class="summary-row anim-fade anim-delay-1"></div>

        <!-- Trade Cards -->
        <div id="tradeCards" class="anim-fade anim-delay-2"></div>

        <div class="footer">TradingHub &copy; 2026</div>
    </div>

    <script src="data.js"></script>
    <script src="nav.js"></script>
    <script>
        renderNav('trades');
        initParticles();

        const trades = DETAILED_TRADES || [];

        // Summary
        if (trades.length > 0) {
            const totalPnl = trades.reduce((s, t) => s + t.pnl, 0);
            const wins = trades.filter(t => t.pnl > 0);
            const losses = trades.filter(t => t.pnl <= 0);
            const avgRoi = trades.reduce((s, t) => s + t.roi, 0) / trades.length;
            const bestTrade = trades.reduce((best, t) => t.pnl > best.pnl ? t : best, trades[0]);

            document.getElementById('summaryRow').innerHTML = `
                <div class="summary-card">
                    <div class="val" style="color:${totalPnl >= 0 ? 'var(--green)' : 'var(--red)'}">
                        ${totalPnl >= 0 ? '+' : ''}$${totalPnl.toFixed(2)}
                    </div>
                    <div class="lbl">Total P&L</div>
                </div>
                <div class="summary-card">
                    <div class="val">${trades.length}</div>
                    <div class="lbl">Total Trades</div>
                </div>
                <div class="summary-card">
                    <div class="val" style="color:var(--green)">${(wins.length / trades.length * 100).toFixed(0)}%</div>
                    <div class="lbl">Win Rate</div>
                </div>
                <div class="summary-card">
                    <div class="val" style="color:var(--purple)">${avgRoi.toFixed(1)}%</div>
                    <div class="lbl">Avg ROI</div>
                </div>
                <div class="summary-card">
                    <div class="val" style="color:var(--green)">+$${bestTrade.pnl.toFixed(2)}</div>
                    <div class="lbl">Best Trade</div>
                </div>
            `;
        }

        // Trade cards
        if (trades.length === 0) {
            document.getElementById('tradeCards').innerHTML = `
                <div class="empty-state">
                    <div class="icon">üì≠</div>
                    <h3>No trades logged yet</h3>
                    <p>Detailed trades will appear here as they're recorded.</p>
                </div>`;
        } else {
            document.getElementById('tradeCards').innerHTML = trades.slice().reverse().map((t, i) => {
                const isWin = t.pnl > 0;
                const pnlColor = isWin ? 'var(--green)' : 'var(--red)';
                const dirClass = t.direction === 'LONG' ? 'badge-dir-long' : 'badge-dir-short';
                const statusClass = t.status.includes('SL') ? 'sl' : '';

                return `<div class="trade-card ${isWin ? 'win' : 'loss'}">
                    <div class="trade-header">
                        <div>
                            <span class="trade-pair">${t.pair}</span>
                            <span style="color:var(--text-dim);font-size:0.8rem;margin-left:8px">#${t.id}</span>
                        </div>
                        <div class="trade-pnl" style="color:${pnlColor}">
                            ${isWin ? '+' : ''}$${t.pnl.toFixed(2)}
                            <span style="font-size:0.75rem;opacity:0.7;margin-left:4px">(${t.roi}% ROI)</span>
                        </div>
                    </div>

                    <div class="trade-badges">
                        <span class="trade-badge ${dirClass}">${t.direction}</span>
                        <span class="trade-badge badge-lev">${t.leverage}</span>
                        <span class="trade-badge badge-mode">${t.mode}</span>
                        <span class="trade-badge badge-status ${statusClass}">${t.status}</span>
                    </div>

                    <div class="trade-grid">
                        <div class="trade-metric">
                            <div class="trade-metric-label">Entry Price</div>
                            <div class="trade-metric-value">$${t.entry}</div>
                        </div>
                        <div class="trade-metric">
                            <div class="trade-metric-label">Exit Price</div>
                            <div class="trade-metric-value">$${t.exit}</div>
                        </div>
                        <div class="trade-metric">
                            <div class="trade-metric-label">Size</div>
                            <div class="trade-metric-value">${t.size} ${t.sizeUnit}</div>
                        </div>
                        <div class="trade-metric">
                            <div class="trade-metric-label">P&L</div>
                            <div class="trade-metric-value" style="color:${pnlColor}">${isWin ? '+' : ''}$${t.pnl.toFixed(2)}</div>
                        </div>
                        ${t.tp ? `<div class="trade-metric">
                            <div class="trade-metric-label">Take Profit</div>
                            <div class="trade-metric-value" style="color:var(--green)">$${t.tp}</div>
                        </div>` : ''}
                        ${t.sl ? `<div class="trade-metric">
                            <div class="trade-metric-label">Stop Loss</div>
                            <div class="trade-metric-value" style="color:var(--red)">$${t.sl}</div>
                        </div>` : ''}
                    </div>

                    <div class="trade-timeline">
                        <span>üìÖ ${t.openTime}</span>
                        <span class="arrow">‚Üí</span>
                        <span>üìÖ ${t.closeTime}</span>
                        <span class="duration">‚è± ${t.duration}</span>
                    </div>

                    ${t.notes ? `<div class="trade-notes">üí° ${t.notes}</div>` : ''}
                </div>`;
            }).join('');
        }
    </script>
</body>
</html>
